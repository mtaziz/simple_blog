{% extends 'base.html' %}
{% block title %}
    我的网站|首页
{% endblock %}
{% block head_extrends %}
    <link rel="stylesheet" href="/static/home.css">
    <script src="/static/echarts.common.min.js"></script>
{% endblock %}
{% block nav_home_active %}active{% endblock %}
{% block content %}
    <h3 class="home-content">我的网站，请随便看</h3>
    <div id="main"></div>
    <div class="hot_blogs">
        <div><h3>今天热门点击</h3>
            <ul>
                {% for hot_data in today_hot_data %}
                    <li>
                        <a href="/blog/{{ hot_data.content_object.pk }}">{{ hot_data.content_object.title }}</a>
                    </li>
                {% empty %}
                    <li>暂无热门博客</li>
                {% endfor %}
            </ul>
        </div>
        <div><h3>昨天热门点击</h3>
            <ul>
                {% for hot_data in yesterday_hot_data %}
                    <li>
                        <a href="/blog/{{ hot_data.content_object.pk }}">{{ hot_data.content_object.title }}</a>
                    </li>
                {% empty %}
                    <li>暂无热门博客</li>
                {% endfor %}
            </ul>
        </div>
        <div><h3>七天热门点击</h3>
            <ul>
                {% for hot_data in for_7_days_hot_data %}
                    <li>
                        <a href="/blog/{{ hot_data.id }}">{{ hot_data.title }}</a>
                    </li>
                {% empty %}
                    <li>暂无热门博客</li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var worldMapContainer = document.getElementById('main');

        //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
        var resizeWorldMapContainer = function () {
            worldMapContainer.style.width = window.innerWidth + 'px';
            worldMapContainer.style.height = window.innerHeight + 'px';
        };
        //设置容器高宽
        resizeWorldMapContainer();
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(worldMapContainer);

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: null
            },

            xAxis: {
                type: 'category',
                data: {{ dates|safe }},
                name: '最近7日阅读量'
            },
            yAxis: {},
            series: [{
                name: '阅读量',
                type: 'line',
                data: {{ read_nums }},
                smooth: true,
                itemStyle: {normal: {label: {show: true}}},

            }]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        window.onresize = function () {
            //重置容器高宽
            resizeWorldMapContainer();
            myChart.resize();
        }
    </script>
{% endblock %}
